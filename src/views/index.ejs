<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width,user-scalable=no, initial-scale=1.0, maximum-scale=1.0,minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Articles</title>
  <link rel="stylesheet" href="/styles.css">
  <link rel="icon" href="/favicon.ico">
</head>

<body class="<%= theme %>">
  <div class="container">
    <%- include(page, locals) %>
      <form id="theme-form">
        <button type="button" id="toggle-theme">Toggle Theme</button>
      </form>
  </div>

  <script>
    document.getElementById('toggle-theme').addEventListener('click', async () => {
      const currentTheme = '<%= theme %>';
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

      await fetch('/theme', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ theme: newTheme }),
      });

      location.reload();
    });
  </script>
</body>

</html>